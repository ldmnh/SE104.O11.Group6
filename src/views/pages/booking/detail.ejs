<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,300,0..1,0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="/styles/pages/booking/detail.css" />
    <title>2WAYS.com</title>
</head>

<body>

    <main class="content-container">
        <section class="title">
            <h1>Đặt phòng đã được xác nhận của bạn tại 2way.com</h1>

        </section>

        <section class="detail">
            <div class="detail__col-1">
                <img src="/imgs/accommodation/accommodation_1.jpg" alt="">
                <div class="detail__location">
                    <div>
                        <h3><%=booking[0].acco_name%></h3>
                        <div class="title__rating">
                            <% for (let i = 0; i < booking[0].acco_star; i++) {%>
                            <span class="material-symbols-outlined">grade</span>
                            <%}%>
                                <% for (let i = 0; i < 5-(booking[0].acco_star) ; i++) {%>
                            <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 0">star</span>
                            <%}%>
                        </div>  
                        <p><%=booking[0].acco_exac_location%></p>
                            <p>Hội An,</p>
                            <p>Việt Nam.</p>
                        </div>
                        <a href="<%=booking[0].acco_location_link%>" data-bs-toggle="modal" data-bs-target="#modal">Hiển thị bản đồ</a>
                    </div>
                    <div class="detail__contact">
                        <h2>Bạn có thắc mắc?</h2>
                        <p>Liên hệ chỗ nghỉ nếu bạn có thắc mắc hay yêu cầu đặc biệt nào.</p>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">+84 348 918 224</a>
                        <button type="button" class="btn detail__btn" data-bs-toggle="modal" data-bs-target="#modal">
                            <span class="material-symbols-outlined">chat</span>
                            <p>Nhắn tin cho chỗ nghỉ</p>
                        </button>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">Gửi mail cho chỗ nghỉ</a>
                    </div>
                    <div class="detail__help">
                        <div>
                            <span class="material-symbols-outlined">help</span>
                            <h2>Bạn cần trợ giúp?</h2>
                        </div>
                        <a href="" data-bs-toggle="modal" data-bs-target="#modal">Liên hệ Dịch vụ Khách hàng</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">Thay đổi ngày tháng</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">Thêm lựa chọn chỗ nghỉ cho khách</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">Xem chính sách của chỗ nghỉ</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">Xem xác nhận đặt phòng</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modal">In xác nhận đặt phòng</a>
                    </div>
                </div>

                <div class="detail__col-2">
                    <h2>Danh sách phòng đặt</h2>
                    <% bookingDetails.forEach(function(book){ %>
                    <div class="detail__room room">
                        <h3><%=book.room_name%></h3>
                        <div class="room__content">
                            <img src="/imgs/accommodation/accommodation_1.jpg" alt="">
                            <div>
                                <p class="room__room-class">Phòng <%=book.room_class%></p>
                                <p class="room__quantity">Số lượng: <%=book.book_num_room%></p>
                                <p class="room__unit-price"><del>VND <%=book.book_room_cost_before_currency%></del> VND <%=book.book_room_cost_after_currency%></p>
                                <% if (booking[0].book_status == 1){ %>
                                <form action="/account/addReview" method="POST">
                                <input type="hidden" value="<%=book.room_id%>" name="room_id">
                                <button type="submit" class="btn detail__btn form--submit2 review-btn">Đánh giá</button>
                                <% } %>
                            </form>
                            
                            </div>
                        </div>
                    </div>
                    <% }) %>
                </div>

                <div class="detail__col-3">
                    <div class="detail__code">
                        <div>
                            <h3>Mã xác nhận:</h3>
                            <p>12345678</p>
                        </div>
                    </div>
                    <div class="detail__checkin">
                        <h3>Ngày đặt</h3>
                        <p><%=booking[0].book_date_format%></p>
                        <p><%=booking[0].book_time_format%></p>
                    </div>
                    <div class="detail__checkin">
                        <h3>Nhận phòng</h3>
                        <p><%=booking[0].book_start_date_format%></p>
                        <p><%=booking[0].book_start_time_format%></p>
                    </div>
                    <div class="detail__checkout">
                        <h3>Trả phòng</h3>
                        <p><%=booking[0].book_end_date_format%></p>
                        <p><%=booking[0].book_end_time_format%></p>
                    </div>
                    <div class="detail__price price">
                        <h3>Tổng tiền thanh toán</h3>
                        <p class="price__strong">VND <%=booking[0].book_cost_after_currency%></p>
                    </div>
                </div>
        </section>

        <section class="abort">
            <div class="abort__info">
                <h2>Miễn phí hủy đặt phòng</h2>
                <% if (!booking[0].book_time_left_format){ %>
                <p class="abort__time-left">Hết hạn hủy miễn phí!!!</p>
                <% } else { %>
                <p class="abort__time-left">Còn <%=booking[0].book_time_left_format%>!!!</p>
                <% } %>
                <p class="abort__condition">Để <span class="abort__highlight">miễn phí hủy</span> bạn cần phải hủy <span class="abort__highlight">trước <%=booking[0].book_time_count_format%> <%=booking[0].book_time_format%> giờ</span></p>
                <p>Sau thời gian này bạn sẽ phải thanh toán VND 2.800.000 để hủy</p>
            </div>
            <div class="abort__progress">
                <div class="progress__title">
                    <p>Miễn phí</p>
                    <p>Không hoàn tiền</p>
                </div>
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p class="progress__time"><%=booking[0].book_time_count_format%></p>
            </div>
            <a href="/booking/success" class="btn detail__btn" role="button">Hủy đặt phòng</a>
        </section>
    </main>
    <%- include('../../components/cancel-popup') %>

    <div class="modal fade" id="modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg ">
            <div class="modal-content">
                <div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>
                <span class="material-symbols-outlined">cancel</span>
                <p>Thực hiện thất bại, vui lòng thử lại sau!</p>
            </div>
        </div>
    </div>
    <%- include('../../components/review-popup.ejs') %>
    <%- include('../../partials/footer') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/scripts/booking-detail.js"></script>
    <script src="/scripts/cancel-popup.js"></script>
</body>

</html>